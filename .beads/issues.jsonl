{"id":"OrchidTracker-0k7","title":"Fix empty history bug: load log entries separately","description":"get_orchids SELECT doesn't join log_entry table, so orchid.history is always empty. Remove history from Orchid struct, load via get_log_entries in OrchidDetail on mount. Fix history refresh after add_log_entry.","status":"open","priority":1,"issue_type":"bug","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:10:55Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:10:55Z"}
{"id":"OrchidTracker-22e","title":"Encryption key rotation breaks data source credentials","description":"When SESSION_SECRET is rotated, decrypt_or_raw() in src/crypto.rs falls back to returning raw base64 ciphertext instead of plaintext JSON, making data source credentials (Tempest tokens, AC Infinity passwords) unrecoverable. The fallback was designed for legacy unencrypted plaintext, not for ciphertext encrypted with a stale key.\n\nOptions to fix:\n1. Separate ENCRYPTION_KEY env var so session and encryption keys rotate independently\n2. OLD_ENCRYPTION_KEY env var that tries current key first, falls back to old key, then re-encrypts on read\n3. Document that key rotation requires manual credential re-entry (simplest)\n\nAffects: src/crypto.rs decrypt_or_raw()","status":"open","priority":3,"issue_type":"bug","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-19T01:58:41Z","created_by":"Matthew Runo","updated_at":"2026-02-19T01:58:41Z"}
{"id":"OrchidTracker-2wx","title":"Phase 7: First bloom celebration","description":"CSS animations, overlay with golden glow + petal confetti, auto-dismiss, badge on card","status":"closed","priority":3,"issue_type":"feature","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:19:13Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:31:06Z","closed_at":"2026-02-20T18:31:06Z","close_reason":"Tab system, redesigned form, growth thread, and first bloom celebration all implemented","dependencies":[{"issue_id":"OrchidTracker-2wx","depends_on_id":"OrchidTracker-wy4","type":"blocks","created_at":"2026-02-20T10:19:20Z","created_by":"Matthew Runo","metadata":"{}"}]}
{"id":"OrchidTracker-3a4","title":"Update add_log_entry server fn with event_type + first bloom detection","description":"Add event_type param to add_log_entry. Validate against allowed values. Return AddLogEntryResponse { entry, is_first_bloom }. When event_type=Flowering, check for prior Flowering entries; if none, set orchid.first_bloom_at and return is_first_bloom=true. Also update mark_watered to set event_type=Watered.","status":"open","priority":1,"issue_type":"task","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:11:04Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:11:04Z","dependencies":[{"issue_id":"OrchidTracker-3a4","depends_on_id":"OrchidTracker-3ot","type":"blocks","created_at":"2026-02-20T10:11:59Z","created_by":"Matthew Runo","metadata":"{}"}]}
{"id":"OrchidTracker-3ot","title":"Update LogEntry and Orchid domain types for event_type","description":"In src/orchid.rs: remove history Vec from Orchid, add first_bloom_at Option\u003cDateTime\u003e. Add event_type Option\u003cString\u003e to LogEntry. In src/server_fns/orchids.rs: update LogEntryDbRow and OrchidDbRow, update into_log_entry and into_orchid conversions. Fix update.rs test helpers.","status":"open","priority":1,"issue_type":"task","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:11:01Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:11:01Z","dependencies":[{"issue_id":"OrchidTracker-3ot","depends_on_id":"OrchidTracker-0k7","type":"blocks","created_at":"2026-02-20T10:11:59Z","created_by":"Matthew Runo","metadata":"{}"},{"issue_id":"OrchidTracker-3ot","depends_on_id":"OrchidTracker-cka","type":"blocks","created_at":"2026-02-20T10:11:59Z","created_by":"Matthew Runo","metadata":"{}"}]}
{"id":"OrchidTracker-4qy","title":"Phase 6: Tab system for detail modal","description":"Two tabs: Journal (add entry + growth thread) and Details (edit form, habitat, watering)","status":"closed","priority":2,"issue_type":"feature","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:19:13Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:31:06Z","closed_at":"2026-02-20T18:31:06Z","close_reason":"Tab system, redesigned form, growth thread, and first bloom celebration all implemented","dependencies":[{"issue_id":"OrchidTracker-4qy","depends_on_id":"OrchidTracker-eqe","type":"blocks","created_at":"2026-02-20T10:19:19Z","created_by":"Matthew Runo","metadata":"{}"},{"issue_id":"OrchidTracker-4qy","depends_on_id":"OrchidTracker-r8o","type":"blocks","created_at":"2026-02-20T10:19:19Z","created_by":"Matthew Runo","metadata":"{}"}]}
{"id":"OrchidTracker-4tn","title":"Phase 2: Event type system (constants + picker)","description":"EventTypeInfo metadata, 8 event types with themed colors, visual picker component","status":"closed","priority":2,"issue_type":"feature","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:19:13Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:28:17Z","closed_at":"2026-02-20T18:28:17Z","close_reason":"Event types and photo capture components implemented and compiling","dependencies":[{"issue_id":"OrchidTracker-4tn","depends_on_id":"OrchidTracker-wy4","type":"blocks","created_at":"2026-02-20T10:19:18Z","created_by":"Matthew Runo","metadata":"{}"}]}
{"id":"OrchidTracker-59c","title":"TEA Pattern Bypassed in Home Page","description":"AGENTS.md prescribes strict adherence to The Elm Architecture (TEA) where all state transitions go through 'Msg' and side effects go through 'Cmd'. However, src/pages/home.rs bypasses this by using Leptos Resources directly for domain data and raw leptos::task::spawn_local calls for async mutations (e.g., on_add, on_update), making the TEA 'Model' handle only UI state. We need to reconcile this architectural divergence.","status":"open","priority":2,"issue_type":"task","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:54:45Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:54:45Z"}
{"id":"OrchidTracker-5vk","title":"Photo timeline gallery for orchid progression","description":"Images already attach to log entries and there's a thread view on the orchid card, but there's no dedicated visual timeline/gallery view to see an orchid's progression over months/years. Add a photo gallery mode to the orchid detail that displays images chronologically in a grid or filmstrip layout, with timestamps and associated notes. Side-by-side photo comparison would help growers assess health changes visually. Build on the existing log entry image infrastructure.","status":"open","priority":2,"issue_type":"feature","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-19T02:46:24Z","created_by":"Matthew Runo","updated_at":"2026-02-19T02:46:24Z"}
{"id":"OrchidTracker-6um","title":"Resolve Clippy Warnings","description":"There are unresolved clippy warnings that violate the 'zero warnings' policy in AGENTS.md: 1) clippy::collapsible_if in src/components/growth_thread.rs (line 34) and 2) clippy::too_many_arguments in src/server_fns/orchids.rs (line 209 for create_orchid).","status":"open","priority":3,"issue_type":"task","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:54:45Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:54:45Z"}
{"id":"OrchidTracker-7gr","title":"Fertilizer and repotting tracking","description":"No structured tracking for repotting or fertilization. Add fields for: last repotted date, potting medium type (bark, sphagnum, semi-hydro, etc.), pot size, fertilizer type, fertilizer schedule (days), last fertilized date. These are key care events growers track alongside watering. Could be displayed on the orchid detail card and included in care schedule views.","status":"open","priority":3,"issue_type":"feature","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-19T02:46:31Z","created_by":"Matthew Runo","updated_at":"2026-02-19T02:46:31Z"}
{"id":"OrchidTracker-89r","title":"Phase 3: Photo upload component","description":"Multi-method photo capture: camera, file input, drag-drop, clipboard paste. Upload to /api/images/upload","status":"closed","priority":2,"issue_type":"feature","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:19:13Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:28:17Z","closed_at":"2026-02-20T18:28:17Z","close_reason":"Event types and photo capture components implemented and compiling","dependencies":[{"issue_id":"OrchidTracker-89r","depends_on_id":"OrchidTracker-wy4","type":"blocks","created_at":"2026-02-20T10:19:19Z","created_by":"Matthew Runo","metadata":"{}"}]}
{"id":"OrchidTracker-9f0","title":"Add Journal/Details tab system to OrchidDetail","description":"In orchid_detail.rs: add DetailTab enum (Journal|Details) with active_tab signal. Journal tab = Add Entry form + Growth Thread. Details tab = current edit form, habitat weather, watering status. Tab bar styled like orchid_collection.rs tabs. Extract each tab body into own component fn returning .into_any() for release build depth-limit safety.","status":"open","priority":2,"issue_type":"task","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:11:21Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:11:21Z","dependencies":[{"issue_id":"OrchidTracker-9f0","depends_on_id":"OrchidTracker-a5q","type":"blocks","created_at":"2026-02-20T10:12:00Z","created_by":"Matthew Runo","metadata":"{}"}]}
{"id":"OrchidTracker-a5q","title":"Build the Growth Thread component","description":"New file src/components/growth_thread.rs — the core visual experience. A continuous vertical vine/stem you scroll through, newest-first. Node sub-components (all .into_any()): PhotoNode (large rounded image, event badge, note), TextNode (compact emoji+note), WateringNode (minimal muted row), MilestoneNode (larger dot, decorative flourish for Flowering/Purchased/Repotted), MonthDivider (sticky header, DM Serif Display, tendril curl SVG). Smart clustering collapses 3+ watering entries. PhotoLightbox fullscreen overlay on click.","status":"open","priority":1,"issue_type":"feature","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:11:18Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:11:18Z","dependencies":[{"issue_id":"OrchidTracker-a5q","depends_on_id":"OrchidTracker-yvm","type":"blocks","created_at":"2026-02-20T10:12:00Z","created_by":"Matthew Runo","metadata":"{}"}]}
{"id":"OrchidTracker-aj0","title":"Seasonal care awareness and rest period guidance","description":"Many orchids (Dendrobiums, Catasetums, etc.) need seasonal care changes — cool dry rest periods to trigger blooming, reduced fertilizer in winter, adjusted watering. Add species-level seasonal care profiles that indicate when rest periods should start/end based on hemisphere and species. Could integrate with the AI scanner to populate seasonal data on identification, and surface reminders like 'This Dendrobium nobile should begin its cool dry rest in October.' Consider a seasonal calendar view showing upcoming care transitions across the collection.","status":"open","priority":2,"issue_type":"feature","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-19T02:46:28Z","created_by":"Matthew Runo","updated_at":"2026-02-19T02:46:28Z"}
{"id":"OrchidTracker-axw","title":"Create event type metadata constants and picker component","description":"New file src/components/event_types.rs: EventTypeInfo struct with key/label/emoji/color_class/bg_class, EVENT_TYPES array for all 8 types with themed colors, get_event_info() helper. New file src/components/event_type_picker.rs: horizontal pill button row, selected state with event-colored fill, wraps on mobile, returns .into_any().","status":"open","priority":2,"issue_type":"task","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:11:07Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:11:07Z","dependencies":[{"issue_id":"OrchidTracker-axw","depends_on_id":"OrchidTracker-3ot","type":"blocks","created_at":"2026-02-20T10:12:00Z","created_by":"Matthew Runo","metadata":"{}"}]}
{"id":"OrchidTracker-b18","title":"Structured health tracking for orchids","description":"Log entries are currently freeform text. Add structured observation fields to log entries: health score (1-5), bloom status (budding/blooming/spent/none), new root count, leaf count, and general condition notes. This enables charting health trends over time rather than just reading text entries. Could be optional fields on the existing add_log_entry flow — keep freeform notes but add structured data alongside.","status":"open","priority":3,"issue_type":"feature","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-19T02:46:21Z","created_by":"Matthew Runo","updated_at":"2026-02-19T02:46:21Z"}
{"id":"OrchidTracker-b2j","title":"Watering tracking + condition alerts with web push","description":"Two-part feature: (1) watering tracking with last_watered_at, structured temp/humidity ranges, mark_watered server fn, UI integration; (2) condition alerts with web push notifications including VAPID, service worker, alert checking in poller, push subscription management","status":"closed","priority":1,"issue_type":"feature","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-19T02:59:26Z","created_by":"Matthew Runo","updated_at":"2026-02-19T03:24:26Z","closed_at":"2026-02-19T03:24:26Z","close_reason":"Implemented watering tracking + condition alerts with web push. All tests pass, SSR + WASM compile clean, full build successful."}
{"id":"OrchidTracker-c01","title":"Create PhotoCapture multi-method upload component","description":"New file src/components/photo_capture.rs with 4 input methods (all hydrate-gated): camera capture (reuse getUserMedia from scanner.rs), file input with capture=environment, drag-and-drop zone, clipboard paste. Upload via FormData fetch to /api/images/upload. Show thumbnail preview after upload with remove button. Add FormData/Request/Response web-sys features to Cargo.toml.","status":"open","priority":1,"issue_type":"feature","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:11:11Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:11:11Z","dependencies":[{"issue_id":"OrchidTracker-c01","depends_on_id":"OrchidTracker-3ot","type":"blocks","created_at":"2026-02-20T10:12:00Z","created_by":"Matthew Runo","metadata":"{}"}]}
{"id":"OrchidTracker-cka","title":"Add event_type field to log_entry schema","description":"New migration 0008: add event_type option\u003cstring\u003e with ASSERT on valid values (Flowering, NewGrowth, Repotted, Fertilized, PestTreatment, Purchased, Watered, Note). Add first_bloom_at option\u003cdatetime\u003e to orchid table. Add index on log_entry(orchid, timestamp).","status":"open","priority":1,"issue_type":"task","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:10:58Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:10:58Z"}
{"id":"OrchidTracker-dps","title":"Phase 0: Fix critical bugs (empty history, no refresh)","description":"Remove history from Orchid struct, load via spawn_local, refresh after add","status":"closed","priority":0,"issue_type":"bug","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:18:59Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:22:47Z","closed_at":"2026-02-20T18:22:47Z","close_reason":"Removed history from Orchid struct, added first_bloom_at, load entries via spawn_local, prepend on add"}
{"id":"OrchidTracker-egp","title":"Architecture Documentation Drift (CSR vs SSR)","description":"The AGENTS.md documentation explicitly states the application is a Client-Side-Only (CSR) app compiled with Trunk, with no backend server. However, the actual codebase is a Full-stack SSR Leptos application using Axum, Tokio, and SurrealDB for the backend. We need to either revert the codebase to CSR or update AGENTS.md to reflect the new SSR architecture.","status":"closed","priority":1,"issue_type":"task","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:54:44Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:57:06Z","closed_at":"2026-02-20T18:57:06Z","close_reason":"Closed"}
{"id":"OrchidTracker-eqe","title":"Phase 4: Redesigned add entry form","description":"Replace bare-bones form with EventTypePicker + PhotoCapture + textarea + submit","status":"closed","priority":2,"issue_type":"feature","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:19:13Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:31:06Z","closed_at":"2026-02-20T18:31:06Z","close_reason":"Tab system, redesigned form, growth thread, and first bloom celebration all implemented","dependencies":[{"issue_id":"OrchidTracker-eqe","depends_on_id":"OrchidTracker-4tn","type":"blocks","created_at":"2026-02-20T10:19:19Z","created_by":"Matthew Runo","metadata":"{}"},{"issue_id":"OrchidTracker-eqe","depends_on_id":"OrchidTracker-89r","type":"blocks","created_at":"2026-02-20T10:19:19Z","created_by":"Matthew Runo","metadata":"{}"}]}
{"id":"OrchidTracker-evs","title":"First Bloom celebration animation + badge","description":"CSS animations in tailwind.css: bloom-glow (radial golden pulse), petal-fall (8 staggered petal emojis), bloom-badge-in (spring bounce). New file src/components/first_bloom.rs: fixed overlay with golden glow + petal confetti + First Bloom heading in DM Serif Display. Auto-dismiss 4s via gloo_timers, click to dismiss early. Integration: render in orchid_detail when is_first_bloom signal true. Add golden First Bloom badge to orchid_card.rs when first_bloom_at.is_some().","status":"open","priority":2,"issue_type":"feature","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:11:23Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:11:23Z","dependencies":[{"issue_id":"OrchidTracker-evs","depends_on_id":"OrchidTracker-yvm","type":"blocks","created_at":"2026-02-20T10:12:01Z","created_by":"Matthew Runo","metadata":"{}"}]}
{"id":"OrchidTracker-gle","title":"Phase 8: Care recap - Gemini-powered milestone context","description":"generate_care_recap server fn, lazy-loaded on milestone nodes, graceful fallback to raw stats","status":"closed","priority":3,"issue_type":"feature","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:19:14Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:34:11Z","closed_at":"2026-02-20T18:34:11Z","close_reason":"generate_care_recap server fn, lazy-loaded milestone insight, fallback to raw stats","dependencies":[{"issue_id":"OrchidTracker-gle","depends_on_id":"OrchidTracker-r8o","type":"blocks","created_at":"2026-02-20T10:19:20Z","created_by":"Matthew Runo","metadata":"{}"}]}
{"id":"OrchidTracker-r8o","title":"Phase 5: Growth Thread component","description":"Vertical vine timeline with photo nodes, text nodes, watering nodes, milestones, month dividers, lightbox","status":"closed","priority":1,"issue_type":"feature","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:19:13Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:31:06Z","closed_at":"2026-02-20T18:31:06Z","close_reason":"Tab system, redesigned form, growth thread, and first bloom celebration all implemented","dependencies":[{"issue_id":"OrchidTracker-r8o","depends_on_id":"OrchidTracker-wy4","type":"blocks","created_at":"2026-02-20T10:19:19Z","created_by":"Matthew Runo","metadata":"{}"}]}
{"id":"OrchidTracker-wy4","title":"Phase 1: Data layer - migration + type changes","description":"New migration for event_type, first_bloom_at, index. Update domain types, add_log_entry server fn, mark_watered.","status":"closed","priority":1,"issue_type":"feature","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:19:12Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:23:03Z","closed_at":"2026-02-20T18:23:03Z","close_reason":"Migration, type changes, event_type param, first bloom logic, mark_watered event_type all done","dependencies":[{"issue_id":"OrchidTracker-wy4","depends_on_id":"OrchidTracker-dps","type":"blocks","created_at":"2026-02-20T10:19:18Z","created_by":"Matthew Runo","metadata":"{}"}]}
{"id":"OrchidTracker-yvm","title":"Redesign Add Entry form with event picker + photo capture","description":"In orchid_detail.rs, replace current Add Entry section (lines 371-387) with: EventTypePicker at top, PhotoCapture component, compact note textarea, submit button. Add signals for selected_event_type, uploaded_filename, is_first_bloom. Submit handler calls add_log_entry with all params, prepends entry to log_entries signal, triggers first bloom celebration if is_first_bloom.","status":"open","priority":2,"issue_type":"task","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:11:14Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:11:14Z","dependencies":[{"issue_id":"OrchidTracker-yvm","depends_on_id":"OrchidTracker-3a4","type":"blocks","created_at":"2026-02-20T10:12:00Z","created_by":"Matthew Runo","metadata":"{}"},{"issue_id":"OrchidTracker-yvm","depends_on_id":"OrchidTracker-axw","type":"blocks","created_at":"2026-02-20T10:12:00Z","created_by":"Matthew Runo","metadata":"{}"},{"issue_id":"OrchidTracker-yvm","depends_on_id":"OrchidTracker-c01","type":"blocks","created_at":"2026-02-20T10:12:00Z","created_by":"Matthew Runo","metadata":"{}"}]}
{"id":"OrchidTracker-zkm","title":"Gemini-powered Care Recap for milestone events","description":"New server fn generate_care_recap in src/server_fns/scanner.rs. Gathers 6 months of care data (watering frequency, climate readings, care events) for an orchid, sends structured summary to Gemini asking why this milestone happened. Returns 2-3 sentence narrative. In Growth Thread MilestoneNode: lazy-load on user click ('Why did this happen?' expandable), cache result in local signal. Fallback to raw stats if Gemini unavailable.","status":"open","priority":2,"issue_type":"feature","owner":"74583+inktomi@users.noreply.github.com","created_at":"2026-02-20T18:16:54Z","created_by":"Matthew Runo","updated_at":"2026-02-20T18:16:54Z","dependencies":[{"issue_id":"OrchidTracker-zkm","depends_on_id":"OrchidTracker-a5q","type":"blocks","created_at":"2026-02-20T10:16:57Z","created_by":"Matthew Runo","metadata":"{}"}]}
